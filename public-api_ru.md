# <a name="begin"/> Public API v3

*[English](public-api.md) ∙ [Русский](public-api_ru.md)*
___

* [Оглавление](#main)
* [Методы](#methods)
    * [info](#info)
    * [ticker](#ticker)
    * [depth](#depth)
    * [trades](#trades)

## <a name="main"/> Оглавление

Данный апи предоставляет возможность доступа к такой информации, как: тикеры пар, активные ордера пар, последние торги по паре и др.

Все запросы к API идут по следующему адресу: \
https://wex.nz/api/3/<имя метода>/<перечисление пар>

Пары перечисляются используя знак тире (-) для разделения, например: \
https://wex.nz/api/3/ticker/btc_usd-btc_rur

Можно использовать любое количество пар в перечислении. Дубликаты не допускаются. Так же можно использовать только одну пару, например: \
https://wex.nz/api/3/ticker/btc_usd \
Множество пар работает со всеми методами представленными в паблик апи, кроме info.

Вся информация кэшируется каждые 2 секунды, поэтому нет смысла делать запросы чаще. \
Все ответы от апи приходят в формате JSON.

**Важно!** Апи начнет выдавать ошибку, если мы отключим одну из пар перечисленных в вашем запросе. Если вы не собираетесь синхронизировать состояние пар через метод info, стоит присылать GET-параметр ignore_invalid равным 1, например: \
https://wex.nz/api/3/ticker/btc_usd-btc_btc?ignore_invalid=1 \
Без параметра ignore_invalid этот запрос вызвал бы ошибку из-за несуществующей пары.

##### [В начало](#begin)
___
## <a name="methods"/> Методы
### <a name="info"/> info

Данный метод предоставляет всю информацию о текущих активных парах, такую как: максимальное количество знаков после запятой при торгах, минимальную цену, максимальную цену, минимальное количество при покупке/продаже, скрыта ли пара и комиссию по паре.

**Пример запроса:**

```bash
curl -X GET \
  https://wex.nz/api/3/info
```

**Пример ответа:**

```javascript
{
  "server_time": 1370814956,
  "pairs": {
    "btc_usd": {
      "decimal_places": 3,
      "min_price": 0.1,
      "max_price": 400,
      "min_amount": 0.01,
      "hidden": 0,
      "fee": 0.2
    }
    # etc
  }
}
```

**decimal_places**: количество знаков после запятой разрешенные при торгах. \
**min_price**: минимальная цена разрешенная при торгах. \
**max_price**: максимальная цена разрешенная при торгах. \
**min_amount**: минимальное количество разрешенное для покупки/продажи. \
**hidden**: скрыта ли пара, значение 0 или 1. \
**fee**: комиссия пары.

Скрытая пара (hidden=1) продолжает работать, но не отображается в списке пар на главной странице. \
Комиссия отображается для всех пользователей, она не изменится если на вашем аккаунте она изменена (например по акции). \
При отключении нами какой либо пары, она просто пропадет из списка.

##### [В начало](#begin)
___
### <a name="ticker"/> ticker

Данный метод предоставляет всю информацию о торгах по паре, такую как: максимальная цена, минимальная цена, средняя цена, объем торгов, объем торгов в валюте, последняя сделка, цена покупки и продажи. \
Вся информация предоставлена за последние 24 часа.

**Пример запроса:**

```bash
curl -X GET \
  https://wex.nz/api/3/ticker/btc_usd
```

**Пример ответа:**
```javascript
{
  "btc_usd": {
    "high": 109.88,
    "low": 91.14,
    "avg": 100.51,
    "vol": 1632898.2249,
    "vol_cur": 16541.51969,
    "last": 101.773,
    "buy": 101.9,
    "sell": 101.773,
    "updated": 1370816308
  }
  # etc
}
```

**high**: макcимальная цена. \
**low**: минимальная цена. \
**avg**: средняя цена. \
**vol**: объем торгов. \
**vol_cur**: объем торгов в валюте. \
**last**: цена последней сделки. \
**buy**: цена покупки. \
**sell**: цена продажи. \
**updated**: последнее обновление кэша.

##### [В начало](#begin)
___
### <a name="depth"/> depth

Данный метод предоставляет информацию о активных ордерах пары.

Дополнительно принимает необязательный GET-параметр limit, который указывает, сколько ордеров нужно вывести (по умолчанию 150). \
Принимает значение не более 5000.

**Пример запроса:**

```bash
curl -X GET \
  https://wex.nz/api/3/depth/btc_usd
```

**Пример ответа:**

```javascript
{
  "btc_usd": {
    "asks": [
      [
        103.426,
        0.01
      ],
      [
        103.5,
        15
      ],
      [
        103.504,
        0.425
      ],
      [
        103.505,
        0.1
      ],
      # etc
    ],
    "bids": [
      [
        103.2,
        2.48502251
      ],
      [
        103.082,
        0.46540304
      ],
      [
        102.91,
        0.99007913
      ],
      [
        102.83,
        0.07832332
      ],
      # etc
    ]
  }
  # etc
}
```

**asks**: ордера на продажу. \
**bids**: ордера на покупку.

##### [В начало](#begin)
___
### <a name="trades"/> trades

Данный метод предоставляет информацию о последних сделках.

Дополнительно принимает необязательный GET-параметр limit, который указывает, сколько сделок нужно вывести (по умолчанию 150). \
Принимает значение не более 5000.

**Пример запроса:**

```bash
curl -X GET \
  https://wex.nz/api/3/trades/btc_usd
```

**Пример ответа:**

```javascript
{
  "btc_usd": [
    {
      "type": "ask",
      "price": 103.6,
      "amount": 0.101,
      "tid": 4861261,
      "timestamp": 1370818007
    },
    {
      "type": "bid",
      "price": 103.989,
      "amount": 1.51414,
      "tid": 4861254,
      "timestamp": 1370817960
    },
    # etc
  ]
  # etc
}
```

**type**: ask - продажа, bid - покупка. \
**price**: цена покупки/продажи. \
**amount**: количество купленного/проданного. \
**tid**: идентификатор сделки. \
**timestamp**: UNIX time сделки.

##### [В начало](#begin)